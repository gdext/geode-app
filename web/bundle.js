(()=>{"use strict";var t={814:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,"html {\r\n    width:  100%;\r\n    height: 100%;\r\n}\r\n\r\nbody {\r\n    margin: 0;\r\n\r\n    width:  100%;\r\n    height: 100%;\r\n\r\n    overflow: hidden;\r\n\r\n    font-family: 'Segoe UI', sans-serif;\r\n}\r\n\r\n.bg {\r\n    position: fixed;\r\n    -webkit-user-drag: none;\r\n    -webkit-user-select: none;\r\n    z-index: -10;\r\n}\r\n\r\n.geode-layer {\r\n    background-color: black;\r\n    opacity: 0.7;\r\n\r\n    position: absolute;\r\n    z-index: -5;\r\n\r\n    width:  100%;\r\n    height: 100%;\r\n}\r\n\r\n.geode-app {\r\n    width:  100%;\r\n    height: 100%;\r\n}\r\n\r\n.geode-footer {\r\n    position: absolute;\r\n\r\n    right: 0px;\r\n    bottom: 0px;\r\n\r\n    margin-bottom: 5px;\r\n    margin-right:  10px;\r\n\r\n    color: rgb(255, 255, 255);\r\n    font-size: 16px;\r\n\r\n    opacity: 0.5;\r\n    z-index: -4;\r\n\r\n    -webkit-user-drag: none;\r\n    -webkit-user-select: none;\r\n}\r\n\r\n.geode-window {\r\n    background-color: #272727e7;\r\n    border: 1px solid black;\r\n\r\n    position: absolute;\r\n\r\n    border-radius: 3px;\r\n\r\n    -webkit-box-shadow: 0px 0px 6px 0px rgba(0,0,0,0.4);\r\n}\r\n\r\n.window-top {\r\n    width: auto;\r\n    height: 20px;\r\n\r\n    padding-top: 4px;\r\n    padding-bottom: 4px;\r\n\r\n    padding-left:  15px;\r\n    padding-right: 4px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n    -webkit-user-drag: none;\r\n    -webkit-user-select: none;\r\n}\r\n\r\n.window-title {\r\n    color: rgb(189, 189, 189);\r\n\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n\r\n    line-height: 1.2;\r\n\r\n    height: 22px;\r\n\r\n    flex: 1;\r\n}\r\n\r\n.window-button {\r\n    filter: brightness(0.74);\r\n\r\n    height: 100%;\r\n\r\n    padding-left:  9px;\r\n    padding-right: 9px;\r\n\r\n    margin-left: 5px;\r\n\r\n    cursor: pointer;\r\n\r\n    -webkit-user-drag: none;\r\n    -webkit-user-select: none;\r\n}\r\n\r\n.window-button:hover {\r\n    background-color: rgba(0, 0, 0, 0.239);\r\n\r\n    filter: brightness(1);\r\n\r\n    border-radius: 3px;\r\n}\r\n\r\n.window-drag {\r\n    position: absolute;\r\n}\r\n\r\n.drag-top {\r\n    top: -4px;\r\n\r\n    width: calc(100% - 78px);\r\n    height: 8px;\r\n\r\n    cursor: n-resize;\r\n}\r\n\r\n.drag-left {\r\n    top: 0px;\r\n    left: -4px;\r\n\r\n    height: 100%;\r\n    width: 8px;\r\n\r\n    cursor: e-resize;\r\n}\r\n\r\n.drag-bottom {\r\n    bottom: -4px;\r\n    \r\n    width: 100%;\r\n    height: 8px;\r\n\r\n    cursor: n-resize;\r\n}\r\n\r\n.drag-right {\r\n    top: 0px;\r\n    right: -4px;\r\n\r\n    height: 100%;\r\n    width: 8px;\r\n\r\n    cursor: e-resize;\r\n}\r\n\r\n.drag-topleft {\r\n    top: -4px;\r\n    left: -4px;\r\n\r\n    height: 8px;\r\n    width: 8px;\r\n\r\n    cursor: nw-resize;\r\n}\r\n\r\n.drag-topright {\r\n    top: -4px;\r\n    right: -4px;\r\n\r\n    height: 8px;\r\n    width: 8px;\r\n\r\n    cursor: ne-resize;\r\n}\r\n\r\n.drag-bottomleft {\r\n    bottom: -4px;\r\n    left: -4px;\r\n\r\n    height: 8px;\r\n    width: 8px;\r\n\r\n    cursor: sw-resize;\r\n}\r\n\r\n.drag-bottomright {\r\n    bottom: -4px;\r\n    right: -4px;\r\n\r\n    height: 8px;\r\n    width: 8px;\r\n\r\n    cursor: se-resize;\r\n}\r\n\r\n.window-content {\r\n    height: calc(100% - 32px);\r\n\r\n    margin-left:   4px;\r\n    margin-right:  4px;\r\n    margin-bottom: 4px;\r\n}",""]);const o=i},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var d=0;d<t.length;d++){var a=[].concat(t[d]);r&&i[a[0]]||(n&&(a[2]?a[2]="".concat(n," and ").concat(a[2]):a[2]=n),e.push(a))}},e}},695:t=>{var e={};t.exports=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],d=0;d<t.length;d++){var a=t[d],h=r.base?a[0]+r.base:a[0],l=o[h]||0,p="".concat(h," ").concat(l);o[h]=l+1;var g=n(p),c={css:a[1],media:a[2],sourceMap:a[3]};-1!==g?(e[g].references++,e[g].updater(c)):e.push({identifier:p,updater:i(c,r),references:1}),s.push(p)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var d=n(o[s]);e[d].references--}for(var a=r(t,i),h=0;h<o.length;h++){var l=n(o[h]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=a}}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{let t;t={loaded_icons:{},element:(e,n=[],r=[],i={})=>{let o=document.createElement(e);if("string"==typeof n)o.classList.add(n);else if("object"==typeof n)for(let t of n)o.classList.add(t);for(const[t,e]of Object.entries(i))o.setAttribute(t,e);if(Array.isArray(r))for(let e of r)t.add(o,e);else t.add(o,r);return o},icon:(e,n=[],r={})=>{const i={src:t.loaded_icons[e]};return t.element("img",n,[],Object.assign(i,r))},load_icon:(e,n)=>{t.loaded_icons[e]=n},input:(e,n=[],r={})=>t.element("input",n,[],Object.assign({type:e},r)),img:(e,n=[],r={})=>{if("string"==typeof e)return t.element("img",n,[],Object.assign({src:e},r));{let t=e.cloneNode(!1);if("string"==typeof n)t.classList.add(n);else if("object"==typeof n)for(let e of n)t.classList.add(e);for(const[e,n]of Object.entries(r))t.setAttribute(e,n);return t}},a:(e,n=[],r="",i={})=>t.element("a",n,r,Object.assign({href:e},i)),p:(e=[],n="",r={})=>t.element("p",e,n,r),span:(e=[],n="",r={})=>t.element("span",e,n,r),div:(e=[],n=[],r={})=>t.element("div",e,n,r),add:(t,e)=>{"string"==typeof e?t.appendChild(document.createTextNode(e)):t.appendChild(e)}};const e=t;var r=n(379),i=n.n(r),o=n(795),s=n.n(o),d=n(695),a=n.n(d),h=n(216),l=n.n(h),p=n(814),g={styleTagTransform:function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},setAttributes:function(t){var e=n.nc;e&&t.setAttribute("nonce",e)},insert:function(t){var e=a()("head");if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(t)}};g.domAPI=s(),g.insertStyleElement=l(),i()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals;const c=n.p+"e381121e396931ce2f6632964e2c8c4d.svg",w=n.p+"b3f873275ed325021041b01c14c2de8e.svg";class u{constructor(t,n,r,i){this.x=r.x?r.x:200,this.y=r.y?r.y:300,this.width=r.width?r.width:400,this.height=r.height?r.height:300,this.title=r.title?r.title:"Geode Untitled Window",this.maxWidth=r.maxWidth?r.maxWidth:200,this.maxHeight=r.maxHeight?r.maxHeight:28,this.id=n,this.desktop=t,this.content=e.div("window-content"),this.holding=!1,this.dragHold=0;let o=0,s=0,d=0,a=0;this.windowTop=e.div("window-top",[e.span("window-title",this.title),e.div("window-buttons",[e.icon("bxs-pin","window-button"),e.icon("close-big","window-button")])]),this.windowTop.onmousedown=t=>{window.getSelection().empty(),0==t.button&&(this.holding=!0)};let h=t=>{d+=t,this.y=Math.min(d,a-this.maxHeight),this.height-=t},l=t=>{this.height+=t},p=t=>{o+=t,this.x=Math.min(o,s-this.maxWidth),this.width-=t},g=t=>{this.width+=t};document.addEventListener("mousemove",(t=>{0!=this.dragHold?(0!=(8&this.dragHold)&&h(t.movementY),0!=(4&this.dragHold)&&l(t.movementY),0!=(2&this.dragHold)&&p(t.movementX),0!=(1&this.dragHold)&&g(t.movementX),this.updateTransform()):this.holding&&(this.x+=t.movementX,this.y+=t.movementY,this.updateTransform())})),document.addEventListener("mouseup",(t=>{this.holding=!1,this.dragHold=0,this.width=Math.max(this.width,this.maxWidth),this.height=Math.max(this.height,this.maxHeight)})),this.dragTop=e.div(["window-drag","drag-top"]),this.dragBottom=e.div(["window-drag","drag-bottom"]),this.dragLeft=e.div(["window-drag","drag-left"]),this.dragRight=e.div(["window-drag","drag-right"]),this.dragTopLeft=e.div(["window-drag","drag-topleft"]),this.dragTopRight=e.div(["window-drag","drag-topright"]),this.dragBottomLeft=e.div(["window-drag","drag-bottomleft"]),this.dragBottomRight=e.div(["window-drag","drag-bottomright"]);let c=(t,e)=>{window.getSelection().empty(),0==e.button&&(this.dragHold=t,console.log(t)),o=this.x,s=o+this.width,d=this.y,a=d+this.height};this.dragTop.onmousedown=c.bind(this,8),this.dragBottom.onmousedown=c.bind(this,4),this.dragLeft.onmousedown=c.bind(this,2),this.dragRight.onmousedown=c.bind(this,1),this.dragTopLeft.onmousedown=c.bind(this,10),this.dragTopRight.onmousedown=c.bind(this,9),this.dragBottomLeft.onmousedown=c.bind(this,6),this.dragBottomRight.onmousedown=c.bind(this,5),this.winElement=e.div("geode-window",[this.windowTop,this.dragTop,this.dragBottom,this.dragLeft,this.dragRight,this.dragTopLeft,this.dragTopRight,this.dragBottomLeft,this.dragBottomRight,this.content]),this.updateTransform()}setZOrder(t){this.winElement.style["z-index"]=t.toString()}isInWindow(t,e){let n=this.winElement.getBoundingClientRect();return t>=n.left-4&&t<n.right+4&&e>=n.top-4&&e<n.bottom+4}updateTransform(){this.winElement.style.left=this.x+"px",this.winElement.style.top=this.y+"px",this.winElement.style.width=Math.max(this.width,200)+"px",this.winElement.style.height=Math.max(this.height,28)+"px"}setPosition(t,e){this.x=t,this.y=e,updateTransform()}setSize(t,e){this.width=t,this.height=e,updateTransform()}getContent(){return this.content}getElement(){return this.winElement}}class m{constructor(t,n){e.load_icon("bxs-pin",c),e.load_icon("close-big",w),this.body=t,this.app=n,this.lastId=0,this.windows={},this.windowOrder=[],this.generate(),document.addEventListener("mousedown",(t=>{let e=this.getWindowAt(t.clientX,t.clientY);null!=e&&this.putWindowOnTop(e)}))}generate(){this.layer=e.div("geode-layer"),this.footer=e.span("geode-footer",this.app.version),this.desktop=e.div("geode-app"),this.layer.style.opacity="0",this.footer.style.opacity="0",this.desktop.style.opacity="0",e.add(this.body,this.layer),e.add(this.body,this.footer),e.add(this.body,this.desktop)}updateZOrders(){for(let t=0;t<this.windowOrder.length;t++){let e=this.windowOrder[t];this.windows[e].setZOrder(t)}}getWindowAt(t,e){let n=null;for(let r=0;r<this.windowOrder.length;r++){let i=this.windowOrder[r];this.windows[i].isInWindow(t,e)&&(n=i)}return n}putWindowOnTop(t){console.log(t);for(let e=0;e<this.windowOrder.length;e++)if(this.windowOrder[e]==t){this.windowOrder.splice(e,1);break}this.windowOrder.push(t),this.updateZOrders()}createWindow(t){let n=new u(this,this.lastId,t);e.add(this.desktop,n.getElement()),this.windows[this.lastId]=n,this.windowOrder.push(this.lastId),this.lastId++,this.updateZOrders()}changeOverlayState(t){1==t?(this.layer.style.opacity="",this.footer.style.opacity="",this.desktop.style.opacity=""):(this.layer.style.opacity="0",this.footer.style.opacity="0",this.desktop.style.opacity="0")}}new class{constructor(){this.version="Geode 1.0.0",this.body=document.getElementsByTagName("body")[0],this.desktop=new m(this.body,this),this.desktop.createWindow({title:"very pogger window"}),this.desktop.createWindow({title:"another very pogger window"}),document.addEventListener("keydown",(t=>{"F2"==t.code&&window.geode.sendOverlayKey()})),window.geode.onOverlayChangeState(this.desktop.changeOverlayState.bind(this.desktop))}}})()})();